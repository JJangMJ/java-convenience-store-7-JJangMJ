# 우테코 7기 프리코스 4주차 미션 - 편의점

## 기능 구현 목록

------

# 1. 입력 기능

- **구입 항목 입력**
    - [ ] 사용자(고객)가 구매할 상품명과 수량을 입력받는다.
    - [ ] 사용자는 [상품명-수량] 형식으로 여러 상품을 쉼표(,)로 구분하여 입력할 수 있다.
    - [ ] 상품명이 잘못되었거나 수량이 잘못된 형식으로 입력된 경우 에러를 발생시키고 다시 입력을 유도한다.


- **추가 선택 입력**

    - **멤버십 할인 적용 여부**
      - [ ] 멤버십 할인을 적용할지 여부를 묻는다.
      - [ ] 'Y' 또는 'N'외의 입력이 들어오면 에러를 발생시키고 다시 입력을 유도한다.

    - **멤버십 할인 적용 여부**
      - [ ] 멤버십 할인을 적용할지 여부를 묻는다.
      - [ ] 'Y' 또는 'N'외의 입력이 들어오면 에러를 발생시키고 다시 입력을 유도한다.

    - **프로모션 상품 추가 여부**
      - [ ] 현재 구매한 상품 중 프로모션 상품으로 추가 무료 상품을 받을 수 있을 때, 이를 추가할지 여부를 묻는다.
      - [ ] 'Y' 또는 'N'외의 입력이 들어오면 에러를 발생시키고 다시 입력을 유도한다.

    - **일반 가격으로 추가 구매 여부**
      - [ ] 프로모션 할인이 적용되지 않는 수량이 있을 때, 일반 가격으로 추가 구매할지 여부를 묻는다.
      - [ ] 'Y' 또는 'N'외의 입력이 들어오면 에러를 발생시키고 다시 입력을 유도한다.

    - **추가 구매 여부**
      - [ ] 추가로 다른 상품을 구매할지 여부를 묻는다.
      - [ ] 'Y' 또는 'N'외의 입력이 들어오면 에러를 발생시키고 다시 입력을 유도한다.

- **파일 입력**
    - [ ] products.md와 promotions.md 파일을 파일입출력으로 입력받는다.

------

# 2. 입력 예외 처리

- **구입 항목 입력 예외 처리**
    - [ ] 입력된 상품 형식이 [상품명-수량] 형식을 따르지 않는 경우 에러를 발생시킨다.
    - [ ] 존재하지 않는 상품명이 입력된 경우 에러를 발생시킨다.
    - [ ] 상품의 수량이 0 이하인 경우 에러를 발생시킨다.


- **구매 추가 선택 입력 예외 처리**
    - [ ] 멤버십 할인, 프로모션 무료 추가 상품, 일반 가격으로 구매, 추가 구매 여부 질문에 'Y' 또는 'N' 외의 값이 입력된 경우 에러를 발생시킨다.


- **파일 입력 예외 처리**
    - [ ] 상품 파일에서 재고 수량이 "재고없음"으로 표기된 경우, 이를 0으로 간주하고 상품 목록에 표시한다.

------


# 3. 출력 기능

- **상품 목록 출력**
    - [ ] 게임 시작 시 현재 편의점에 보유 중인 상품 목록을 출력한다.
    - [ ] 상품 이름, 가격, 수량, 적용 프로모션 종류를 출력한다.


- **구매 안내 메시지 출력**
    - [ ] 구입 항목과 수량을 입력받기 위한 안내 메시지를 출력한다.
    - [ ] 멤버십 할인 여부와 프로모션 무료 추가 상품 여부, 일반 가격으로 추가 구매 여부를 입력받기 위한 안내 메시지를 출력한다.
    - [ ] 추가 구매 여부를 입력받기 위한 안내 메시지를 출력한다.


- **영수증 출력**
    - [ ] 구매한 각 상품의 이름, 수량, 총 금액을 출력한다.
    - [ ] 프로모션으로 받은 무료 상품이 있을 경우 '증정' 항목으로 출력한다.
    - [ ] 총 구매 금액, 프로모션 할인 금액, 멤버십 할인 금액, 최종 결제 금액을 출력한다.

------

# 4. 비즈니스 로직

- **상품 처리 로직**

    - **입력된 구매 항목을 확인하여 재고에서 상품 차감** 
      - [ ] 입력받은 상품명과 수량을 기준으로, 재고 목록에서 일치하는 상품을 찾는다.
      - [ ] 해당 상품의 재고 수량을 입력된 수량만큼 차감하여, 차감 후 재고가 0이하가 되지 않도록 한다.

    - **재고가 부족할 경우 추가 구매 여부 확인**
      - [ ] 재고가 부족한 경우, 프로모션 할인이 적용되지 않는 남은 수량에 대해 사용자에게 일반 가격으로 구매할지 여부를 묻는다.
      - [ ] 사용자가 일반 가격으로 추가 구매를 선택한 경우, 재고에서 추가 차감하고 일반 가격으로 계산에 반영한다.
  
    - **각 상품별 총 금액 계산**
      - [ ] 입력된 수량과 단가를 곱하여 각 상품의 총 금액을 계산하고 영수증에 추가한다.
    

- **프로모션 적용 로직**

    - **프로모션 조건 확인 및 할인 적용**
        - [ ] 구매한 각 상품에 대해 설정된 프로모션 조건을 확인하고, 조건이 만족될 경우 할인 및 무료 추가 수량을 적용한다.
        - [ ] 예를 들어, ‘2+1 프로모션’의 경우, 3개의 상품 중 2개 가격만 계산에 반영하고, 나머지 1개는 무료로 제공한다.

    - **프로모션 세트 개수 계산**
        - [ ] 프로모션 조건을 만족하는 세트 개수를 계산하여, 그 세트 수만큼 할인을 적용한다.
        - [ ] 남은 수량(프로모션 적용되지 않는 나머지 수량)에 대해서는 일반 가격으로 처리한다.

    - **무료 추가 수량 여부 확인**
        - [ ] 프로모션으로 인해 추가 수량(예: 2+1 프로모션에서 1개 무료)이 발생한 경우, 사용자에게 해당 추가 수량을 받을지 여부를 묻는다.
        - [ ] 사용자가 추가 수량을 선택한 경우, 해당 수량을 무료로 영수증에 추가하고, 재고에서 차감한다.
    
    - **상품별 프로모션 할인 금액 계산 및 누적**
        - [ ] 각 상품별로 적용된 프로모션 할인 금액을 계산하여 누적한다.
        - [ ] 누적된 프로모션 할인 금액을 영수증에 추가하여 최종 결제 금액에 반영한다.


- **멤버십 할인 로직**

    - **멤버십 할인 적용 금액 계산**
        - [ ] 프로모션 할인이 적용되지 않은 상품 금액을 기준으로 멤버십 할인 가능 금액을 산정한다.

    - **멤버십 할인 금액 계산 및 최대 한도 확인**
        - [ ] 프로모션 할인이 적용되지 않은 금액의 30%를 멤버십 할인으로 적용한다.
        - [ ] 멤버십 할인의 최대 한도는 8,000원으로 설정되어 있으며, 계산된 할인 금액이 8,000원을 초과할 경우 8,000원까지만 적용한다.

    - **멤버십 할인 금액을 최종 결제 금액에 반영**
        - [ ] 멤버십 할인을 적용한 금액을 총 결제 금액에 반영하고, 영수증에 멤버십 할인 금액을 출력한다.


- **총 결제 금액 계산 로직**

    - **상품별 총 금액 합산하여 원래 결제 금액 계산**
        - [ ] 각 상품의 총 금액을 합산하여 원래 결제 금액을 계산한다.
        - [ ] 원래 결제 금액은 프로모션과 멤버십 할인이 적용되지 않은 상태의 금액이다.

    - **프로모션 할인과 멤버십 할인 차감하여 최종 결제 금액 산출**
        - [ ] 원래 결제 금액에서 프로모션 할인 금액과 멤버십 할인 금액을 차감하여 최종 결제 금액을 산출한다.

    - **영수증 출력 시 최종 금액 반영**
        - [ ] 계산된 최종 결제 금액을 영수증에 반영하고 출력한다.
        - [ ] 총 결제 금액, 프로모션 할인 금액, 멤버십 할인 금액, 최종 결제 금액을 각각의 항목으로 구분하여 출력한다.